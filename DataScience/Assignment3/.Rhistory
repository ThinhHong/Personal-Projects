library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library
library(tibble)
dataset <- read_excel("statementofvotescastoctober242018.xls", skip = 2)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(tidyverse)
install.packages("tidyverse")
dataset <- read_excel("statementofvotescastoctober242018.xls", skip = 2)
dataset <- read_excel("statementofvotescastoctober242018.xls", skip = 2)
dataset <- dataset %>% clean_names() %>% na.omit(dataset)
View(dataset)
dataset <- read_excel("statementofvotescastoctober242018.xls",)
dataset <- dataset %>% clean_names()
View(dataset)
dataset <- read_excel("statementofvotescastoctober242018.xls",sheet = sheet, skip = 2)
library(tidyverse)
dataset <- read_excel("statementofvotescastoctober242018.xls",sheet = sheet, skip = 2)
dataset <- read_excel("statementofvotescastoctober242018.xls", skip = 2)
dataset <- dataset %>% clean_names()
View(dataset)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(tidyr)  # need to load this, new one just came out
library(stringr) # new
library(knitr) # for kable
library(readr) # for parse_date, parse_numbe
df <- read_excel("statementofvotescastoctober242018.xls", sheet = 2, skip = 2)
df <- df %>%
clean_names() %>%
select(-starts_with("x_")) %>%
na.omit() %>%
select(-precinct_1) %>%
filter(!str_detect(precinct, "City / Ville - Total"))
# functions
View(df)
df <- read_excel("statementofvotescastoctober242018.xls", sheet = 2, skip = 2)
df <- df %>%
clean_names() %>%
select(-starts_with("x_")) %>%
na.omit() %>%
select(-precinct_1) %>%
filter(!str_detect(precinct, "City / Ville - Total"))
df <- read_excel("statementofvotescastoctober242018.xls", sheet = 2, skip = 2)
df <- df %>%
clean_names() %>%
select(-starts_with("x_")) %>%
na.omit() %>%
select(-precinct_1) %>%
filter(!str_detect(precinct, "City / Ville - Total"))
df <- read_excel("statementofvotescastoctober242018.xls", sheet = 2, skip = 2)
dataset <- read_excel("statementofvotescastoctober242018.xls", sheet = 2, skip = 2)
dataset <- dataset %>%
clean_names() %>%
select(-starts_with("x_")) %>%
na.omit() %>%
select(-precinct_1) %>%
filter(!str_detect(precinct, "City / Ville - Total"))
View(dataset)
f<-function(x,y=1){
ans<- x+y
return(ans)
}
View(f)
View(f)
getHeavyPrecincts <- function( votes){
ans<-df %>% filter( total_votes >= votes)
return(ans)
}
View(getHeavyPrecincts)
getHeavyPrecincts(1000)
getHeavyPrecincts(1500)
getPrecincts <- function( data, min_votes = 0, max_votes=1000){
ans <- data %>%
filter( total_votes >= min_votes, total_votes<=max_votes) %>%
select(precinct)
return(ans)
}
getHeavyPrecincts2 <- function( votes=1000){
ans<-df %>% filter( total_votes >= votes)
return(ans)
}
getHeavyPrecincts2()
getHeavyPrecincts2(votes=1500)
getPrecincts <- function( data, min_votes = 0, max_votes=1000){
ans <- data %>%
filter( total_votes >= min_votes, total_votes<=max_votes) %>%
select(precinct)
return(ans)
}
getPrecincts2 <- function( data, min_votes = 0, max_votes=1000){
ans <- data %>%
filter( between(total_votes, min_votes, max_votes)) %>%
select(precinct)
return(ans)
}
getPrecincts2(df)
getPrecincts2(df, 1000,1500)
getPrecincts2(df)
getPrecincts2(df, 1000,1500)
View(df)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data %>% clean_names %>% select(starts_with("precinct_")) %>% na.omit(shee
View(data)
View(data)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data %>% clean_names %>% select(-starts_with("precinct_")) %>% na.omit(data)
View(data)
data %>% clean_names %>% filter((precinct_1 != 'City / Ville - Total'))
View(data)
sheet %>% clean_names %>% select(starts_with("precinct...1")) %>% na.omit(sheet)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data %>% clean_names %>% filter((precinct_1 != 'City / Ville - Total'))
data %>% clean_names %>% filter((precinct_1 != 'City / Ville - Total')) %>%na.omit(data)
View(data)
data %>% clean_names %>% filter((precinct_1 != 'City / Ville - Total')) %>%na.omit(data)
View(data)
data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total')
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total')
View(data)
data <- data %>% clean_names %>% filter(precinct...1 != 'City / Ville - Total')
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total')
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total') %>%na.omit(data)
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total')
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville - Total')
View(dataset)
View(data)
data <- data %>% clean_names %>% select(precinct_1 != 'City / Ville - Total')
data <- data %>% clean_names %>% filter(precinct_1 != 'City / VilleTotal')
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville')
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville',"Ottawa")
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville')
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precint_1 != "Ottawa")
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa")
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"Precinct_7")
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7")
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>% na.omit(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>% na.omit(data)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>% na.omit(data)
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>%
dataset %>% ggplot(aes(x = precinct_1 ,y =jan_harder - hadi_wess , colour = (jan_harder <= hadi_wess)))+
geom_point()+
coord_flip()+
labs(
x = 'Precinct_1',
y = 'Difference in votes between jan_harder and hadi_wess'
)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>%
dataset %>% ggplot(aes(x = precinct_1 ,y =jan_harder - hadi_wess , colour = (jan_harder <= hadi_wess)))+
geom_point()+
coord_flip()+
labs(
x = 'Precinct_1',
y = 'Difference in votes between jan_harder and hadi_wess'
)
View(data)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7")
View(data)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = "Ward 2", skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7") %>% select(-starts_with('x'))
View(data)
for(i in c( 3:25 )){
print(i)
}
data <- read_excel("statementofvotescastoctober242018.xls", sheet = sheetNumber, skip = 2)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = 3, skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7", -"times_cast",-"undervotes",-"overvotes") %>% select(-starts_with('x'))
View(data)
View(data)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = 3, skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7", -"times_cast",-"undervotes",-"overvotes") %>% select(-starts_with('x'))
data <- read_excel("statementofvotescastoctober242018.xls", sheet = 3, skip = 2)
View(data)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7", -"times_cast",-"undervotes",-"overvotes") %>% select(-starts_with('x'))
View(data)
x <- which.max(data$ City/Ville - Total)
x <- rowMaxs(data, "City / Villet - Total")
df <- arrange("City / Ville - Total")
df <- order_by(data$precinct_1)
df <- arrange(precinct_1)
df <- arrange(data$precinct_1)
data <- read_excel("statementofvotescastoctober242018.xls", sheet = 3, skip = 2)
data <- data %>% clean_names %>% filter(precinct_1 != 'City / Ville') %>% filter(precinct_1 != "Ottawa") %>% select(-"precinct_7", -"times_cast",-"undervotes",-"overvotes") %>% select(-starts_with('x'))
View(data)
max <- data%>%summarise_each(sum) %>% gather(everything(), key = 'Candidate', value = 'total') %>% arrange(desc(total))
max <- data%>%summarise_each(sum) %>% gather(everything(), key = 'Candidate', value = 'total') %>% arrange(desc(total_votes))
totalVotes <- data %>%
totalVotes <- data %>%
totalVotes <- data %>%
totalVotes <- data %>% summarise_each(sum) %>%
totalVotes <- data %>% summarise_each(sum) %>% gather(everything(), key='candidate', value='total_votes') %>% arrange(desc(total_votes)
totalVotes <- data %>% summarise_each(sum) %>% gather(everything(), key='candidate', value='total_votes') %>% arrange(desc(total_votes))
x <- c("t", "t", "h", "t", "h", "h", "t", "t", "t", "t", "t", "t", "h", "h", "t", "h", "t", "t", "t", "t", "t", "h", "t", "t", "h", "t")
hs = str_count(x,"h")
ts = str_count(x,"t")
heads <- sum(hs,1)
tails <- sum(ts,1)
prop.test(8,26, p = NULL, alternative = "two.sided", correct = TRUE)
prop.test(18,26, p = NULL, alternative = "two.sided", correct = TRUE)
prop.test(8,26, p = NULL, alternative = "two.sided", correct = TRUE)
prop.test(18,26, p = NULL, alternative = "two.sided", correct = TRUE)
try <- data %>% summarise(sum) %>% gather(everything(), key ='Candidate', value = 'total_votes'))
try <- data %>% summarise(sum) %>% gather(everything(), key ='Candidate', value = 'total_votes')
rowMax(data)
rowMaxs(data)
votes <- data %>% summarise_each(sum())
?which.max
win <- sort(precinct_1)
win <- sort("precinct_1")
win
win <- sort("City / Ville - Total")
win
View(data)
win <- data %>% select("City / Ville - Total")
win <- sort(data)
win <- data %>% slice(-)
win <- data %>% group_by(City / Ville - Total) %>% arrange(stopSequence) %>% slice(n()) %>%
ungroup
win <- sort(data$precinct_1)
win
win <- sort(data$rick_bedard)
win
win <- data[0,1]
win
win <- data[0,2]
win
win <- tail(data,1)
win
xk <- sort(win)
?rowMaxs
sheet <- tail(data,1)
View(sheet)
library(dplyr)
library(readxl)
library(janitor)
library(ggplot2)
library(skimr)
library(stringr)
library(plyr)
library(tidyverse)
